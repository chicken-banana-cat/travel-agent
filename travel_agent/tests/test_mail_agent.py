import os
from pathlib import Path

import pytest
from dotenv import load_dotenv

# 환경변수 설정을 먼저 수행
env_path = Path(__file__).parent.parent.parent / ".env"
if env_path.exists():
    load_dotenv(env_path)
else:
    # .env 파일이 없는 경우 테스트용 환경변수 설정
    os.environ["SMTP_SERVER"] = "smtp.test.com"
    os.environ["SMTP_PORT"] = "587"
    os.environ["SMTP_USERNAME"] = "test@test.com"
    os.environ["SMTP_PASSWORD"] = "test-password"
    os.environ["SENDER_EMAIL"] = "test@test.com"

from travel_agent.core.agents.mail_agent import MailAgent


@pytest.fixture(autouse=True)
def setup_env():
    """테스트에 필요한 환경변수 설정"""
    yield

    # 테스트 후 환경변수 정리 (테스트용 환경변수만)
    if not env_path.exists():
        for key in [
            "SMTP_SERVER",
            "SMTP_PORT",
            "SMTP_USERNAME",
            "SMTP_PASSWORD",
            "SENDER_EMAIL",
        ]:
            os.environ.pop(key, None)


@pytest.fixture
def mail_agent():
    return MailAgent()


@pytest.fixture
def test_input():
    return {
        "message": "swj951105@gmail.com",
        "context": {
            "destination": "강릉",
            "duration": "당일치기",
            "preferences": {
                "budget": "30만원",
                "activities": [],
                "transportation": "대중교통",
            },
            "start_date": "6월 중",
            "end_date": "6월 중",
            "email": "swj951105@gmail.com",
        },
        "previous_result": {
            "previous_result": {
                "status": "success",
                "message": "이번 여행은 1일 일정으로 서울에서 강릉까지 KTX를 이용해 당일치기 여행을 계획하셨습니다. 주요 일정은 아침 7시에 서울역에서 출발하여 9시에 강릉 도착, 강릉 중앙시장 내 식당에서 아침 식사를 시작으로 경포 해변 산책, 오죽헌 관람, 초당순두부 마을에서 점심 식사, 안목 해변 카페거리 방문, 선교장 관람 후 강릉 시내에서 강릉역으로 이동, 그리고 저녁 5시에 서울행 KTX를 타고 7시에 서울역에 도착하며 여행을 마무리하는 코스입니다.\n\n검색된 주요 장소는 총 15곳으로, 기차역 2곳(서울역, 강릉역), 관광지 6곳(경포 해변, 오죽헌, 안목 해변, 선교장, 안목 해변 카페거리, 강릉커피거리 포함), 음식점 및 먹거리 7곳(중앙시장 내 식당, 내마음에찜, 강릉꼬막집, 초당순두부마을, 두부마을초당순두부, 엄지네포장마차, 오죽헌소갈비찜)으로 다양합니다.\n\n주요 관심사는 교통편(특히 KTX 및 대중교통), 전통 및 자연 관광지(해변 산책, 전통 가옥 방문), 그리고 강릉 특산물 맛집(초당순두부, 해물찜, 커피 카페거리)입니다. 예산은 총 30만원 내외로 설정되어 있으며, 실제 예상 비용은 교통비 62,000원, 음식비 27,000원, 입장료 6,000원 등 총 약 105,000원으로, 예산 범위 내에서 알차게 계획되었습니다.\n\n일별 주요 일정과 추천 활동은 다음과 같습니다.\n\n- 오전 7:00 서울역 출발 KTX 탑승 (약 2시간 소요, 비용 30,000원)\n- 오전 9:00 강릉 도착 후 강릉 중앙시장 내 식당에서 아침 식사 (신선한 해산물 또는 아귀찜 추천, 약 12,000원)\n- 오전 10:00 경포 해변 산책 및 사진 촬영 (무료, 편안한 복장과 신발 권장)\n- 오전 11:30 오죽헌 방문 및 전통 한옥 관람 (입장료 3,000원, 역사와 문화 체험에 적합)\n- 오후 13:00 초당순두부 마을에서 점심 식사 (초당순두부 요리 추천, 약 15,000원)\n- 오후 14:00 안목 해변 카페거리 방문 및 휴식 (강릉 커피와 바다 전망 즐기기, 카페 이용 비용 약 8,000원)\n- 오후 15:30 선교장 방문 및 전통 가옥 관람 (입장료 3,000원)\n- 오후 16:30 강릉 시내에서 강릉역으로 이동 (버스 또는 택시, 약 2,000원)\n- 오후 17:00 강릉역에서 서울행 KTX 탑승 (2시간 소요, 30,000원)\n- 오후 19:00 서울역 도착, 여행 종료\n\n특별 추천 사항 및 팁은 다음과 같습니다.\n\n1. KTX는 사전 예매 시 할인 혜택이 있으니 미리 예약하여 비용 절감 및 좌석 확보를 권장합니다.\n2. 강릉 시내 이동은 버스와 택시를 적극 활용하면 편리하며, 대중교통 시간표를 미리 확인하세요.\n3. 경포 해변 산책 시 날씨에 따른 적절한 복장과 편안한 신발을 준비하시고, 해변 바람에 대비해 가벼운 외투를 챙기세요.\n4. 초당순두부 마을과 안목 해변 카페거리는 강릉의 대표 먹거리 방문지로, 식사와 휴식 시간을 충분히 확보하는 것이 좋습니다.\n5. 오죽헌과 선교장은 전통과 역사를 느낄 수 있는 문화재이므로, 문화해설 서비스가 있으면 이용해 깊이 있는 이해를 도모하세요.\n6. 당일치기 일정이므로 시간 관리가 중요하며, 각 장소 간 이동 시간을 고려해 여유 있게 계획하세요.\n7. 여유 시간이 있다면 강릉빵다방이나 강릉커피거리에서 디저트와 커피를 즐기는 것도 추천드립니다.\n8. 강릉역과 서울역 모두 시설이 현대적이며 편의시설이 잘 갖추어져 있으니 편리하게 이용 가능합니다.\n9. 여행 당일 강릉 현지 날씨 확인과 교통 상황 점검으로 원활한 일정 진행을 준비하세요.\n\n요약하면, 이번 여행은 서울-강릉 KTX 당일치기 코스로, 자연 경관과 전통 문화, 지역 특산 음식을 중심으로 구성되어 있습니다. 대중교통을 이용하며 약 30만원 예산 내에서 강릉의 주요 명소와 맛집을 효율적으로 방문할 수 있어 만족도 높은 여행이 될 것입니다.",
                "context": {
                    "destination": "강릉",
                    "duration": "당일치기",
                    "preferences": {
                        "places": [
                            {
                                "id": "http://www.letskorail.com/",
                                "name": "서울역 (고속철도)",
                                "type": "장소",
                                "location": {
                                    "address": "서울특별시 용산구 동자동 43-205",
                                    "road_address": "서울특별시 용산구 한강대로 405",
                                    "coordinates": {
                                        "x": "1269706678",
                                        "y": "375550258",
                                    },
                                },
                                "category": "기차,철도>KTX정차역",
                                "description": "서울역(고속철도)은 서울특별시 용산구 동자동에 위치한 대한민국의 대표적인 철도 교통 허브로, KTX와 일반 열차가 정차하는 주요 역입니다. 이곳은 서울의 중심부에 자리해 있어 전국 각지로 빠르고 편리하게 이동할 수 있는 장점이 있습니다.\n\n1. 주요 특징\n서울역은 현대적인 시설과 광범위한 교통망을 갖춘 대형 역으로, 고속철도 KTX를 비롯해 일반 열차, 공항철도, 지하철이 모두 연결되어 있어 다양한 교통수단과 환승이 용이합니다. 역 내에는 편리한 매표소, 다양한 음식점, 카페, 쇼핑 공간이 마련되어 있어 여행객들이 편안하게 대기할 수 있습니다.\n\n2. 방문하기 좋은 시간\n서울역은 연중무휴 24시간 운영되지만, 특히 아침과 저녁 출퇴근 시간대와 주말, 공휴일에는 많은 이용객이 몰리므로 이른 아침이나 평일 오후 시간을 이용하면 비교적 한산하게 이용할 수 있습니다. 봄과 가을철은 여행하기 좋은 계절로, 쾌적한 기후 속에서 서울역을 중심으로 다양한 여행을 즐기기에 적합합니다.\n\n3. 주변 관광지\n서울역 주변에는 남산서울타워, 서울로 7017, 남대문시장 등 서울의 대표적인 관광지가 인접해 있습니다. 특히 서울로 7017은 옛 고가도로를 산책길로 재탄생시킨 장소로, 서울역에서 도보로 접근 가능해 여행 중 잠시 휴식을 취하기 좋습니다.\n\n4. 교통 정보\n서울역은 지하철 1호선, 4호선, 공항철도와 연결되어 있어 서울 시내 어디서든 쉽게 접근할 수 있습니다. 또한 택시와 버스 정류장이 역 주변에 잘 마련되어 있어 시외 이동도 편리합니다. 공항철도를 이용하면 인천국제공항과 김포국제공항까지 빠르게 이동할 수 있습니다.\n\n5. 방문 팁\n서울역 이용 시, 대형 캐리어나 짐이 많은 여행객은 에스컬레이터와 엘리베이터 위치를 미리 확인하는 것이 좋습니다. 또한, 출발 전 모바일 앱이나 홈페이지를 통해 열차 시간표와 좌석 예약 상황을 확인하면 더욱 원활한 여행을 즐길 수 있습니다. 주변 맛집과 카페도 다양하므로 출발 전 또는 도착 후 여유롭게 식사를 즐겨보세요.\n\n서울역(고속철도)은 서울과 전국을 잇는 교통의 중심지로서 편리함과 다양한 즐길 거리를 제공하는 곳입니다. 서울 여행과 국내 이동의 출발점으로 최적의 장소입니다.",
                                "contact": "",
                                "link": "http://www.letskorail.com/",
                                "details": {
                                    "contact": "",
                                    "website": "http://www.letskorail.com/",
                                    "category": "기차,철도>KTX정차역",
                                    "coordinates": {
                                        "x": "1269706678",
                                        "y": "375550258",
                                    },
                                    "address": {
                                        "street": "서울특별시 용산구 한강대로 405",
                                        "full": "서울특별시 용산구 동자동 43-205",
                                    },
                                },
                                "priority": 5,
                                "original_name": "서울역",
                            },
                            {
                                "id": "",
                                "name": "서울역 공항철도",
                                "type": "장소",
                                "location": {
                                    "address": "서울특별시 용산구 동자동 43-205",
                                    "road_address": "서울특별시 용산구 청파로 378",
                                    "coordinates": {
                                        "x": "1269696659",
                                        "y": "375537390",
                                    },
                                },
                                "category": "교통,운수>지하철,전철",
                                "description": "서울역 공항철도는 서울특별시 용산구 동자동에 위치한 주요 교통 허브로, 서울 도심과 인천국제공항을 빠르고 편리하게 연결해 주는 지하철 노선입니다. 이곳은 공항철도(A’REX)와 서울 지하철 1호선, 4호선이 만나는 환승역으로, 국내외 여행객뿐만 아니라 서울 시민들에게도 중요한 교통 중심지로 자리잡고 있습니다.\n\n방문하기 좋은 시간은 출퇴근 혼잡 시간을 피해 오전 10시에서 오후 4시 사이가 쾌적하며, 특히 공항 이용객이 많은 아침과 저녁 시간대에는 다소 붐빌 수 있습니다. 주변에는 남대문시장, 서울로 7017, 덕수궁 등 서울의 대표적인 관광명소가 가까워 여행 중 잠시 들러 다양한 볼거리와 먹거리를 즐기기에 좋습니다.\n\n서울역 공항철도는 서울 지하철 1호선, 4호선과 연계되어 있으며, 공항리무진 버스 및 시내버스 노선도 다양하게 연결되어 있어 접근성이 뛰어납니다. 또한, 택시 승강장과 자전거 대여소도 마련되어 있어 다양한 교통 수단을 활용할 수 있습니다.\n\n방문 팁으로는 공항철도 직통열차를 이용하면 인천공항까지 약 43분 만에 도착할 수 있어 시간을 절약할 수 있으며, 티머니 카드나 모바일 교통카드를 미리 충전해 두면 편리합니다. 또한, 서울역 내부에는 편의점, 카페, 환전소 등이 잘 갖추어져 있어 여행 준비나 환승 중에도 편안하게 이용할 수 있습니다.",
                                "contact": "",
                                "link": "",
                                "details": {
                                    "contact": "",
                                    "website": "",
                                    "category": "교통,운수>지하철,전철",
                                    "coordinates": {
                                        "x": "1269696659",
                                        "y": "375537390",
                                    },
                                    "address": {
                                        "street": "서울특별시 용산구 청파로 378",
                                        "full": "서울특별시 용산구 동자동 43-205",
                                    },
                                },
                                "priority": 5,
                                "original_name": "서울역",
                            },
                            {
                                "id": "https://naezzim.modoo.at",
                                "name": "내마음에찜 강릉본점",
                                "type": "음식점",
                                "location": {
                                    "address": "강원특별자치도 강릉시 임당동 88-1 1층 내마음에찜 강릉본점",
                                    "road_address": "강원특별자치도 강릉시 경강로 2107 1층 내마음에찜 강릉본점",
                                    "coordinates": {
                                        "x": "1288963724",
                                        "y": "377556987",
                                    },
                                },
                                "category": "한식>아귀찜,해물찜",
                                "description": "내마음에찜 강릉본점은 강원도 강릉시 임당동에 위치한 한식 전문점으로, 특히 아귀찜과 해물찜으로 유명한 맛집입니다. 신선한 해산물과 매콤하면서도 감칠맛 나는 양념이 어우러져 깊은 맛을 자랑하며, 강릉 지역에서 해물찜을 즐기기에 최적의 장소입니다.\n\n방문하기 좋은 시기는 신선한 해산물이 풍부한 봄과 가을로, 이때는 제철 재료를 사용해 더욱 풍성한 맛을 경험할 수 있습니다. 또한, 강릉 여행 중 점심이나 저녁 식사로 방문하기에 적합합니다.\n\n주변 관광지로는 경포대, 주문진 해변, 오죽헌 등이 있어 식사 후 강릉의 아름다운 자연과 문화유산을 함께 즐길 수 있습니다.\n\n교통은 강릉 시내에 위치해 있어 강릉터미널이나 강릉역에서 버스나 택시를 이용하면 편리하게 접근할 수 있습니다. 주차 공간도 마련되어 있어 자가용 이용 시에도 부담이 적습니다.\n\n방문 팁으로는 예약을 권장하며, 특히 주말이나 관광 성수기에는 대기 시간이 길 수 있으므로 미리 예약하거나 이른 시간에 방문하는 것이 좋습니다. 또한, 매운 음식을 선호하지 않는 분들은 주문 시 매운맛 조절을 요청할 수 있습니다. 신선한 해물과 정성 가득한 아귀찜을 맛보며 강릉의 맛과 멋을 만끽해보세요!",
                                "contact": "",
                                "link": "https://naezzim.modoo.at",
                                "details": {
                                    "contact": "",
                                    "website": "https://naezzim.modoo.at",
                                    "category": "한식>아귀찜,해물찜",
                                    "coordinates": {
                                        "x": "1288963724",
                                        "y": "377556987",
                                    },
                                    "address": {
                                        "street": "강원특별자치도 강릉시 경강로 2107 1층 내마음에찜 강릉본점",
                                        "full": "강원특별자치도 강릉시 임당동 88-1 1층 내마음에찜 강릉본점",
                                    },
                                },
                                "priority": 4,
                                "original_name": "강릉 중앙시장 내 식당",
                            },
                            {
                                "id": "https://blog.naver.com/dangaman77",
                                "name": "강릉꼬막집 독도네 본점",
                                "type": "음식점",
                                "location": {
                                    "address": "강원특별자치도 강릉시 옥천동 287 1층",
                                    "road_address": "강원특별자치도 강릉시 옥천로 47 1층",
                                    "coordinates": {
                                        "x": "1289004570",
                                        "y": "377593419",
                                    },
                                },
                                "category": "한식>해물,생선요리",
                                "description": "강릉꼬막집 독도네 본점은 강원특별자치도 강릉시 옥천동에 위치한 해물 전문 한식 맛집으로, 신선한 꼬막 요리를 중심으로 다양한 해산물 요리를 즐길 수 있는 곳입니다. 이곳의 주요 특징은 강릉에서 직접 공수한 신선한 꼬막을 사용해 깊고 진한 바다의 맛을 선사한다는 점이며, 꼬막 비빔밥과 꼬막 무침 등 다양한 꼬막 요리가 특히 인기가 많습니다.\n\n방문하기 좋은 시기는 꼬막이 제철인 봄과 초여름(4월~6월)로, 이 시기에 가장 신선하고 맛있는 꼬막을 맛볼 수 있습니다. 강릉의 아름다운 해안 풍경과 함께 봄철 여행을 계획한다면 최고의 선택이 될 것입니다.\n\n주변 관광지로는 강릉 경포대, 정동진 해변, 오죽헌, 안목해변 커피거리 등이 있어 식사 후 강릉의 자연과 문화를 함께 즐길 수 있습니다.\n\n교통 정보는 강릉 시내 중심가에 위치해 있어 강릉 시외버스터미널이나 강릉역에서 택시나 시내버스를 이용해 쉽게 접근할 수 있으며, 자가용 이용 시 네비게이션에 ‘강릉꼬막집 독도네 본점’을 검색하면 편리합니다.\n\n방문 팁으로는 주말과 관광 성수기에는 대기 시간이 있을 수 있으므로 미리 예약하거나 이른 시간에 방문하는 것을 추천하며, 꼬막 요리 외에도 다양한 해산물 메뉴를 맛보고 싶다면 동행인과 여러 메뉴를 나눠 먹어보는 것도 좋습니다. 또한, 신선한 해산물을 즐기기 때문에 알레르기 체질이 있다면 사전에 문의하는 것이 안전합니다.",
                                "contact": "",
                                "link": "https://blog.naver.com/dangaman77",
                                "details": {
                                    "contact": "",
                                    "website": "https://blog.naver.com/dangaman77",
                                    "category": "한식>해물,생선요리",
                                    "coordinates": {
                                        "x": "1289004570",
                                        "y": "377593419",
                                    },
                                    "address": {
                                        "street": "강원특별자치도 강릉시 옥천로 47 1층",
                                        "full": "강원특별자치도 강릉시 옥천동 287 1층",
                                    },
                                },
                                "priority": 4,
                                "original_name": "강릉 중앙시장 내 식당",
                            },
                            {
                                "id": "https://www.gn.go.kr/tour/prog/lod/Sights/S01/sub02_02_01/view.do?cid=434&orderBy=B&pageIndex=1&searchCondition=sj&searchKeyword=%EA%B2%BD%ED%8F%AC%ED%95%B4%EB%B3%80",
                                "name": "경포해변",
                                "type": "관광지",
                                "location": {
                                    "address": "강원특별자치도 강릉시 강문동 산1 -1,",
                                    "road_address": "",
                                    "coordinates": {
                                        "x": "1289082081",
                                        "y": "378054952",
                                    },
                                },
                                "category": "여행,명소>해수욕장,해변",
                                "description": "경포해변은 강원특별자치도 강릉시 강문동에 위치한 대표적인 해수욕장으로, 맑고 깨끗한 바다와 고운 백사장이 어우러진 아름다운 자연경관이 특징입니다. 특히, 동해의 푸른 바다와 경포대의 고즈넉한 풍경이 조화를 이루어 사계절 내내 많은 관광객의 사랑을 받고 있습니다.\n\n방문하기 좋은 시기는 여름철인 6월부터 8월까지로, 해수욕과 다양한 해양 스포츠를 즐기기에 최적의 날씨를 자랑합니다. 또한, 봄과 가을에는 산책과 경포호 주변의 자연을 감상하기에 좋으며, 겨울에는 한적한 바다 풍경을 즐길 수 있습니다.\n\n주변 관광지로는 경포대, 경포호, 오죽헌, 강릉 선교장 등이 있어 해변 방문과 함께 역사와 문화를 체험할 수 있습니다. 특히 경포대에서는 동해안의 아름다운 일출을 감상할 수 있어 많은 방문객이 찾습니다.\n\n교통 정보로는 강릉 시내에서 버스나 택시를 이용해 쉽게 접근할 수 있으며, 강릉 고속버스터미널과 강릉역에서 차량으로 약 10~15분 거리에 위치해 있어 편리합니다. 자가용 이용 시 주차장도 잘 마련되어 있습니다.\n\n방문 팁으로는 여름철에는 해변이 매우 혼잡할 수 있으므로 이른 아침이나 평일 방문을 추천하며, 해수욕 외에도 자전거 대여나 주변 산책로를 이용해 경포호 주변을 둘러보는 것을 권장합니다. 또한, 해안가 바람이 강할 수 있으니 가벼운 외투를 준비하는 것이 좋습니다. 안전을 위해 지정된 구역에서만 수영하고, 쓰레기는 반드시 지정된 장소에 버려 쾌적한 환경을 유지해 주세요.",
                                "contact": "",
                                "link": "https://www.gn.go.kr/tour/prog/lod/Sights/S01/sub02_02_01/view.do?cid=434&orderBy=B&pageIndex=1&searchCondition=sj&searchKeyword=%EA%B2%BD%ED%8F%AC%ED%95%B4%EB%B3%80",
                                "details": {
                                    "contact": "",
                                    "website": "https://www.gn.go.kr/tour/prog/lod/Sights/S01/sub02_02_01/view.do?cid=434&orderBy=B&pageIndex=1&searchCondition=sj&searchKeyword=%EA%B2%BD%ED%8F%AC%ED%95%B4%EB%B3%80",
                                    "category": "여행,명소>해수욕장,해변",
                                    "coordinates": {
                                        "x": "1289082081",
                                        "y": "378054952",
                                    },
                                    "address": {
                                        "street": "",
                                        "full": "강원특별자치도 강릉시 강문동 산1 -1,",
                                    },
                                },
                                "priority": 5,
                                "original_name": "경포 해변",
                            },
                            {
                                "id": "https://skybay.co.kr/",
                                "name": "스카이베이호텔 경포",
                                "type": "관광지",
                                "location": {
                                    "address": "강원특별자치도 강릉시 강문동 258-4 스카이베이호텔 경포",
                                    "road_address": "강원특별자치도 강릉시 해안로 476 스카이베이호텔 경포",
                                    "coordinates": {
                                        "x": "1289077795",
                                        "y": "378042634",
                                    },
                                },
                                "category": "숙박>호텔",
                                "description": "스카이베이호텔 경포는 강원특별자치도 강릉시 강문동 258-4에 위치한 고급 호텔로, 아름다운 경포해변과 바로 인접해 있어 탁 트인 바다 전망을 자랑합니다. 이 호텔은 현대적인 시설과 편안한 객실을 갖추고 있어 휴식과 여유를 동시에 즐길 수 있는 최적의 숙박 장소입니다.\n\n방문하기 좋은 시기는 봄부터 가을까지로, 특히 5월부터 9월 사이에는 경포해변에서 해수욕과 다양한 해양 스포츠를 즐길 수 있어 더욱 매력적입니다. 겨울철에도 바다의 고요한 풍경을 감상하며 온천욕과 함께 쾌적한 휴식을 취할 수 있습니다.\n\n주변 관광지로는 경포대, 오죽헌, 강릉 선교장, 안목해변의 커피 거리 등이 있어 다양한 문화 체험과 맛집 탐방이 가능합니다. 또한, 강릉 시내 중심가와도 가까워 쇼핑과 지역 축제 참여도 용이합니다.\n\n교통은 강릉 시외버스터미널과 강릉 KTX역에서 차량으로 약 15분 거리에 위치해 접근성이 좋으며, 자가용 이용 시에도 경포해변 인근 주요 도로와 연결되어 편리합니다. 호텔에서는 주요 관광지로 이동할 수 있는 셔틀 서비스도 제공하고 있어 편리한 이동이 가능합니다.\n\n방문 팁으로는 바다 전망이 좋은 객실을 미리 예약하는 것을 추천하며, 해변 산책과 일출 감상을 위해 아침 시간을 활용해보세요. 또한, 성수기에는 예약이 빠르게 마감되므로 미리 예약을 진행하는 것이 좋습니다. 호텔 내 레스토랑에서는 신선한 해산물 요리를 즐길 수 있으니 꼭 한번 방문해보시길 바랍니다.",
                                "contact": "",
                                "link": "https://skybay.co.kr/",
                                "details": {
                                    "contact": "",
                                    "website": "https://skybay.co.kr/",
                                    "category": "숙박>호텔",
                                    "coordinates": {
                                        "x": "1289077795",
                                        "y": "378042634",
                                    },
                                    "address": {
                                        "street": "강원특별자치도 강릉시 해안로 476 스카이베이호텔 경포",
                                        "full": "강원특별자치도 강릉시 강문동 258-4 스카이베이호텔 경포",
                                    },
                                },
                                "priority": 5,
                                "original_name": "경포 해변",
                            },
                            {
                                "id": "https://www.gn.go.kr/museum/index.do",
                                "name": "오죽헌",
                                "type": "관광지",
                                "location": {
                                    "address": "강원특별자치도 강릉시 죽헌동 177-4 오죽헌",
                                    "road_address": "강원특별자치도 강릉시 율곡로3139번길 24 오죽헌",
                                    "coordinates": {
                                        "x": "1288775300",
                                        "y": "377792200",
                                    },
                                },
                                "category": "여행,명소>보물",
                                "description": "오죽헌은 강원특별자치도 강릉시 죽헌동에 위치한 역사적인 명소로, 조선시대 율곡 이이와 그의 어머니 신사임당이 태어난 생가로 유명합니다. 전통 한옥의 아름다움과 함께 한국의 유교 문화와 학문 정신을 깊이 느낄 수 있는 곳입니다. 특히 오죽헌이라는 이름은 주변에 울창하게 자란 검은 대나무 숲에서 유래하여 자연과 어우러진 고즈넉한 분위기를 자아냅니다.\n\n방문하기 가장 좋은 시기는 봄과 가을로, 따뜻한 봄날에는 대나무 숲과 정원이 활짝 피어난 꽃들로 아름답고, 가을에는 단풍이 어우러져 한층 운치 있는 경관을 즐길 수 있습니다.\n\n오죽헌 인근에는 강릉시립박물관, 선교장, 경포대 등 다양한 문화유산과 관광지가 있어 함께 둘러보기 좋습니다. 특히 경포해변은 바다를 즐기기에 최적의 장소로, 여행 코스를 풍성하게 만들어 줍니다.\n\n교통은 강릉 시내에서 버스나 택시를 이용하면 편리하며, 자가용 이용 시 네비게이션에 ‘오죽헌’ 또는 주소(강릉시 죽헌동 177-4)를 입력하면 쉽게 찾을 수 있습니다. 주차 공간도 마련되어 있어 차량 방문객도 걱정 없이 방문할 수 있습니다.\n\n방문 팁으로는, 오죽헌 내부 관람 시 전통 가옥의 구조와 율곡 이이 관련 유물을 꼼꼼히 살펴보며 역사적 의미를 느껴보시길 권합니다. 또한, 주변 산책로를 따라 걷다 보면 대나무 숲의 청량한 공기를 만끽할 수 있으니 편안한 신발 착용을 추천드립니다. 현장에 문화해설사가 상주하는 경우가 많으니, 해설 서비스를 이용하면 더욱 깊이 있는 이해가 가능합니다.",
                                "contact": "",
                                "link": "https://www.gn.go.kr/museum/index.do",
                                "details": {
                                    "contact": "",
                                    "website": "https://www.gn.go.kr/museum/index.do",
                                    "category": "여행,명소>보물",
                                    "coordinates": {
                                        "x": "1288775300",
                                        "y": "377792200",
                                    },
                                    "address": {
                                        "street": "강원특별자치도 강릉시 율곡로3139번길 24 오죽헌",
                                        "full": "강원특별자치도 강릉시 죽헌동 177-4 오죽헌",
                                    },
                                },
                                "priority": 4,
                                "original_name": "오죽헌",
                            },
                            {
                                "id": "https://www.instagram.com/giant_galbi.daily",
                                "name": "오죽헌소갈비찜",
                                "type": "관광지",
                                "location": {
                                    "address": "강원특별자치도 강릉시 초당동 343-2 1층",
                                    "road_address": "강원특별자치도 강릉시 난설헌로 219 1층",
                                    "coordinates": {
                                        "x": "1289129968",
                                        "y": "377922895",
                                    },
                                },
                                "category": "음식점>한식",
                                "description": "오죽헌소갈비찜은 강원특별자치도 강릉시 초당동에 위치한 한식 전문 음식점으로, 특히 부드럽고 깊은 맛의 소갈비찜으로 유명합니다. 신선한 재료와 전통적인 조리법이 어우러져 진한 육즙과 풍부한 양념이 일품인 이곳은 강릉을 찾는 미식가들에게 꼭 추천할 만한 맛집입니다.\n\n방문하기 가장 좋은 시기는 계절에 상관없이 언제나 좋은데, 특히 쌀쌀한 가을과 겨울철에 따뜻한 갈비찜 한 그릇이 몸과 마음을 따뜻하게 해줍니다. 여름철에는 시원한 초당두부와 함께 즐기기에도 좋습니다.\n\n주변 관광지로는 오죽헌, 경포대, 초당동 두부마을 등이 있어 식사 후 강릉의 아름다운 자연과 역사 문화도 함께 경험할 수 있습니다.\n\n교통은 강릉 시내 중심가에 위치해 있어 버스나 택시 이용이 편리하며, 자가용을 이용할 경우 주차 공간도 마련되어 있어 부담 없이 방문할 수 있습니다.\n\n방문 팁으로는 인기 메뉴인 소갈비찜은 조리 시간이 다소 걸릴 수 있으므로 예약하거나 미리 주문하는 것을 추천하며, 현지 특산물인 초당두부와 함께 주문하면 더욱 풍성한 식사를 즐길 수 있습니다. 또한, 주말과 휴일에는 방문객이 많으니 여유 있는 시간을 계획하는 것이 좋습니다.",
                                "contact": "",
                                "link": "https://www.instagram.com/giant_galbi.daily",
                                "details": {
                                    "contact": "",
                                    "website": "https://www.instagram.com/giant_galbi.daily",
                                    "category": "음식점>한식",
                                    "coordinates": {
                                        "x": "1289129968",
                                        "y": "377922895",
                                    },
                                    "address": {
                                        "street": "강원특별자치도 강릉시 난설헌로 219 1층",
                                        "full": "강원특별자치도 강릉시 초당동 343-2 1층",
                                    },
                                },
                                "priority": 4,
                                "original_name": "오죽헌",
                            },
                            {
                                "id": "",
                                "name": "초당순두부마을",
                                "type": "음식점",
                                "location": {
                                    "address": "강원특별자치도 강릉시 초당동 20-1",
                                    "road_address": "",
                                    "coordinates": {
                                        "x": "1289156023",
                                        "y": "377906975",
                                    },
                                },
                                "category": "여행,명소>먹자거리",
                                "description": "초당순두부마을은 강원특별자치도 강릉시 초당동에 위치한 대표적인 먹자거리로, 신선한 초당두부를 맛볼 수 있는 명소입니다. 이 마을은 맑고 깨끗한 동해의 해풍과 청정 자연환경 속에서 만들어진 부드럽고 고소한 순두부가 유명하며, 전통 방식으로 만든 다양한 두부 요리를 즐길 수 있어 미식가들의 발길이 끊이지 않습니다.\n\n방문하기 가장 좋은 시기는 봄과 가을로, 온화한 날씨 속에서 마을을 산책하며 맛있는 음식을 즐기기에 최적입니다. 특히 가을에는 주변 단풍과 함께 더욱 아름다운 풍경을 감상할 수 있습니다.\n\n초당순두부마을 인근에는 경포대, 안목해변, 강릉선교장 등 강릉의 유명 관광지가 있어 함께 방문하기 좋습니다. 경포대에서는 탁 트인 바다 전망과 함께 산책로를 즐길 수 있고, 안목해변은 멋진 카페 거리로 유명해 식사 후 커피 한잔을 즐기기에 안성맞춤입니다.\n\n교통은 강릉 시내에서 버스나 택시를 이용해 쉽게 접근할 수 있으며, 자가용 이용 시 강릉 IC에서 약 10분 거리에 위치해 편리합니다. 대중교통을 이용한다면 강릉버스터미널에서 초당순두부마을 방면 버스를 타면 됩니다.\n\n방문 팁으로는 점심이나 저녁 식사 시간대를 피하면 대기 시간을 줄일 수 있으며, 다양한 두부 요리를 맛보기 위해 여러 식당을 돌아다니는 것도 추천합니다. 또한, 신선한 두부와 함께 지역 특산품인 강릉 커피를 곁들이면 더욱 풍성한 미식 경험을 할 수 있습니다.",
                                "contact": "",
                                "link": "",
                                "details": {
                                    "contact": "",
                                    "website": "",
                                    "category": "여행,명소>먹자거리",
                                    "coordinates": {
                                        "x": "1289156023",
                                        "y": "377906975",
                                    },
                                    "address": {
                                        "street": "",
                                        "full": "강원특별자치도 강릉시 초당동 20-1",
                                    },
                                },
                                "priority": 4,
                                "original_name": "초당순두부 마을",
                            },
                            {
                                "id": "",
                                "name": "두부마을초당순두부",
                                "type": "음식점",
                                "location": {
                                    "address": "강원특별자치도 강릉시 홍제동 637-6",
                                    "road_address": "강원특별자치도 강릉시 사임당로 131-1",
                                    "coordinates": {
                                        "x": "1288651353",
                                        "y": "377563725",
                                    },
                                },
                                "category": "한식>두부요리",
                                "description": "두부마을초당순두부는 강원특별자치도 강릉시 홍제동에 위치한 전통 한식 맛집으로, 신선한 두부 요리를 전문으로 합니다. 이곳의 주요 특징은 강릉의 청정 자연에서 얻은 신선한 콩으로 만든 부드럽고 고소한 초당순두부를 맛볼 수 있다는 점입니다. 특히, 고소한 순두부찌개와 다양한 두부 요리는 건강하면서도 깊은 맛을 자랑해 현지인과 관광객 모두에게 사랑받고 있습니다.\n\n방문하기 좋은 시기는 봄과 가을로, 선선한 날씨에 따뜻한 순두부 요리를 즐기기에 안성맞춤입니다. 겨울철에도 따뜻한 음식이 몸을 녹여주어 좋습니다.\n\n주변 관광지로는 강릉 경포대, 오죽헌, 안목해변 등이 가까워 식사 후 아름다운 자연과 문화유산을 함께 둘러볼 수 있습니다.\n\n교통 정보로는 강릉 시내 중심가에서 버스나 택시로 쉽게 접근 가능하며, 자가용 이용 시에는 홍제동 내 주차장이 마련되어 있어 편리합니다.\n\n방문 팁으로는 점심시간과 주말에 방문객이 많으니 예약을 하거나 이른 시간에 방문하는 것이 좋으며, 두부 요리 외에도 계절별 신선한 반찬과 함께 다양한 메뉴를 시도해 보는 것을 추천합니다. 또한, 주변 관광지를 함께 계획하여 강릉 여행을 더욱 풍성하게 즐기세요.",
                                "contact": "",
                                "link": "",
                                "details": {
                                    "contact": "",
                                    "website": "",
                                    "category": "한식>두부요리",
                                    "coordinates": {
                                        "x": "1288651353",
                                        "y": "377563725",
                                    },
                                    "address": {
                                        "street": "강원특별자치도 강릉시 사임당로 131-1",
                                        "full": "강원특별자치도 강릉시 홍제동 637-6",
                                    },
                                },
                                "priority": 4,
                                "original_name": "초당순두부 마을",
                            },
                            {
                                "id": "http://anmokbeach.co.kr",
                                "name": "안목해변",
                                "type": "관광지",
                                "location": {
                                    "address": "강원특별자치도 강릉시 견소동 287-112",
                                    "road_address": "강원특별자치도 강릉시 창해로14번길 20-1",
                                    "coordinates": {
                                        "x": "1289477906",
                                        "y": "377725747",
                                    },
                                },
                                "category": "여행,명소>해수욕장,해변",
                                "description": "안목해변은 강원특별자치도 강릉시 견소동에 위치한 아름다운 해변으로, 맑고 푸른 동해 바다와 넓은 백사장이 어우러져 한국 동해안의 대표적인 휴양지로 손꼽힙니다. 특히 해변을 따라 늘어진 커피 거리로 유명해, 바다를 바라보며 다양한 카페에서 여유로운 시간을 즐길 수 있는 것이 큰 매력입니다.\n\n방문하기 좋은 시기는 봄부터 가을까지이며, 특히 6월에서 9월 사이가 수온이 따뜻해 해수욕과 해변 산책을 즐기기에 최적입니다. 또한, 일출 명소로도 유명해 이른 아침 일출을 감상하고 싶다면 이른 시간 방문을 추천합니다.\n\n주변 관광지로는 경포대, 정동진, 오죽헌 등이 있어 다양한 문화와 자연을 함께 체험할 수 있습니다. 경포대에서는 아름다운 경포호와 해변 전경을 감상할 수 있으며, 정동진에서는 기차를 타고 바다를 따라 달리는 특별한 경험을 할 수 있습니다.\n\n안목해변은 강릉 시내에서 차량으로 약 10분 거리에 위치해 있어 접근성이 뛰어납니다. 대중교통을 이용할 경우 강릉 시외버스터미널이나 강릉역에서 시내버스나 택시를 이용하면 편리합니다. 또한, 해변 인근에는 주차 공간도 잘 마련되어 있어 자가용 이용도 편리합니다.\n\n방문 팁으로는 해변을 따라 늘어선 커피숍에서 커피를 즐기며 바다 풍경을 감상하는 것을 추천드리며, 특히 주말이나 휴가철에는 많은 방문객으로 혼잡할 수 있으므로 이른 아침이나 평일 방문을 권장합니다. 또한, 해변 산책 시 자외선 차단제와 모자를 준비해 안전하고 쾌적한 여행을 즐기세요.",
                                "contact": "",
                                "link": "http://anmokbeach.co.kr",
                                "details": {
                                    "contact": "",
                                    "website": "http://anmokbeach.co.kr",
                                    "category": "여행,명소>해수욕장,해변",
                                    "coordinates": {
                                        "x": "1289477906",
                                        "y": "377725747",
                                    },
                                    "address": {
                                        "street": "강원특별자치도 강릉시 창해로14번길 20-1",
                                        "full": "강원특별자치도 강릉시 견소동 287-112",
                                    },
                                },
                                "priority": 4,
                                "original_name": "안목 해변",
                            },
                            {
                                "id": "https://www.instagram.com/bbang.dabang",
                                "name": "강릉빵다방",
                                "type": "관광지",
                                "location": {
                                    "address": "강원특별자치도 강릉시 포남동 1278-23 강릉빵다방",
                                    "road_address": "강원특별자치도 강릉시 남강초교1길 24 강릉빵다방",
                                    "coordinates": {
                                        "x": "1289181146",
                                        "y": "377690079",
                                    },
                                },
                                "category": "카페,디저트>베이커리",
                                "description": "강릉빵다방은 강원특별자치도 강릉시 포남동에 위치한 인기 베이커리 카페로, 신선한 재료와 정성으로 만든 다양한 빵과 디저트를 즐길 수 있는 곳입니다. 이곳의 주요 특징은 고소하고 부드러운 빵과 함께 커피 한 잔의 여유를 느낄 수 있다는 점으로, 지역 주민뿐만 아니라 관광객들에게도 사랑받고 있습니다.\n\n방문하기 가장 좋은 시기는 봄과 가을로, 따뜻한 햇살 아래에서 카페 앞 작은 정원이나 내부의 아늑한 공간에서 편안하게 시간을 보내기 좋습니다. 특히 주말 아침 시간대는 신선한 빵이 가장 많이 준비되므로 이때 방문하는 것을 추천합니다.\n\n주변 관광지로는 강릉의 대표 명소인 경포대 해변, 오죽헌, 강릉중앙시장 등이 가까워 빵다방 방문 후 다양한 문화와 자연을 함께 즐길 수 있습니다.\n\n교통 정보로는 강릉 시내 중심부에 위치해 있어 버스 이용이 편리하며, 자가용을 이용할 경우 포남동 일대에 주차 공간이 마련되어 있습니다. 강릉터미널에서도 택시로 10분 이내 거리입니다.\n\n방문 팁으로는 인기 메뉴는 빠르게 품절될 수 있으니 이른 시간 방문을 권장하며, 매장 내 좌석이 한정적이므로 단체 방문 시 미리 문의하는 것이 좋습니다. 또한, 계절별 신메뉴와 이벤트가 있으니 공식 SNS를 통해 최신 정보를 확인해보세요.",
                                "contact": "",
                                "link": "https://www.instagram.com/bbang.dabang",
                                "details": {
                                    "contact": "",
                                    "website": "https://www.instagram.com/bbang.dabang",
                                    "category": "카페,디저트>베이커리",
                                    "coordinates": {
                                        "x": "1289181146",
                                        "y": "377690079",
                                    },
                                    "address": {
                                        "street": "강원특별자치도 강릉시 남강초교1길 24 강릉빵다방",
                                        "full": "강원특별자치도 강릉시 포남동 1278-23 강릉빵다방",
                                    },
                                },
                                "priority": 4,
                                "original_name": "안목 해변",
                            },
                            {
                                "id": "http://www.letskorail.com/",
                                "name": "강릉역 (고속철도)",
                                "type": "장소",
                                "location": {
                                    "address": "강원특별자치도 강릉시 교동 118",
                                    "road_address": "강원특별자치도 강릉시 용지로 176",
                                    "coordinates": {
                                        "x": "1288995705",
                                        "y": "377645688",
                                    },
                                },
                                "category": "기차,철도>KTX정차역",
                                "description": "강릉역(KTX)은 강원특별자치도 강릉시 교동에 위치한 현대적이고 편리한 고속철도역으로, 동해안 여행의 관문입니다. 이 역은 서울과 강릉을 잇는 KTX 열차가 정차하여 빠르고 쾌적한 이동을 제공합니다. 강릉역의 주요 특징은 최신 시설과 쾌적한 대기 공간, 그리고 관광객을 위한 다양한 편의시설이 잘 갖추어져 있다는 점입니다.\n\n방문하기 가장 좋은 시기는 봄과 가을로, 특히 봄에는 주변의 경포대 벚꽃과 바다 풍경을 만끽할 수 있고, 가을에는 단풍과 함께 아름다운 해변 산책을 즐길 수 있습니다. 겨울철에는 강릉 인근에 위치한 평창, 정선 등에서 스키와 겨울 스포츠를 즐기기에도 최적입니다.\n\n강릉역 주변에는 경포대, 안목해변, 주문진 수산시장, 오죽헌 등 강릉의 대표적인 관광지가 가까워 다양한 문화와 자연을 경험할 수 있습니다. 또한, 강릉시내 중심가와 연결된 버스 및 택시 서비스가 잘 운영되고 있어 이동이 편리합니다.\n\n교통 정보로는 서울 강릉 간 KTX가 하루 여러 차례 운행되어 약 1시간 40분 내외로 도착 가능하며, 강릉 시내 및 인근 관광지로 연결되는 시내버스와 택시가 역 앞에서 쉽게 이용할 수 있습니다. 자가용 이용 시에는 강릉IC에서 약 10분 거리에 위치해 접근성이 좋습니다.\n\n방문 팁으로는 KTX 예매 시 미리 좌석을 확보하는 것이 좋으며, 강릉역 내 관광 안내소에서 최신 여행 정보를 얻을 수 있습니다. 또한, 강릉의 특산품과 간식을 판매하는 상점들이 많아 여행 기념품 구입에 좋은 장소입니다. 주변 해변과 산책로를 함께 즐기며 강릉의 아름다운 자연과 문화를 만끽해보세요.",
                                "contact": "",
                                "link": "http://www.letskorail.com/",
                                "details": {
                                    "contact": "",
                                    "website": "http://www.letskorail.com/",
                                    "category": "기차,철도>KTX정차역",
                                    "coordinates": {
                                        "x": "1288995705",
                                        "y": "377645688",
                                    },
                                    "address": {
                                        "street": "강원특별자치도 강릉시 용지로 176",
                                        "full": "강원특별자치도 강릉시 교동 118",
                                    },
                                },
                                "priority": 5,
                                "original_name": "강릉역",
                            },
                            {
                                "id": "https://www.instagram.com/umjinae_gangneung/",
                                "name": "엄지네포장마차 본점",
                                "type": "장소",
                                "location": {
                                    "address": "강원특별자치도 강릉시 포남동 1155",
                                    "road_address": "강원특별자치도 강릉시 경강로2255번길 21",
                                    "coordinates": {
                                        "x": "1289070154",
                                        "y": "377663424",
                                    },
                                },
                                "category": "한식>해물,생선요리",
                                "description": "엄지네포장마차 본점은 강원특별자치도 강릉시 포남동에 위치한 해물, 생선 요리 전문 한식 맛집으로, 신선한 해산물과 정갈한 한식 안주를 즐길 수 있는 포장마차 스타일의 인기 명소입니다. 이곳의 주요 특징은 신선한 강릉 해산물을 활용한 다양한 메뉴와 아늑하면서도 활기찬 포장마차 분위기로, 현지인과 관광객 모두에게 사랑받고 있다는 점입니다.\n\n방문하기 가장 좋은 시기는 가을과 겨울철로, 쌀쌀한 날씨에 따뜻한 해물찜이나 해물탕을 먹으며 강릉의 바다 풍경과 함께 특별한 맛의 경험을 할 수 있습니다. 특히 저녁 시간대에는 포장마차의 특유의 활기찬 분위기를 만끽하기에 최적입니다.\n\n주변 관광지로는 경포대 해변, 강릉 아쿠아리움, 안목해변 커피거리 등이 가까워, 식사 후 바다 산책이나 커피 한 잔의 여유를 즐기기에 좋습니다. 또한 강릉 중앙시장도 인근에 위치해 전통 시장의 다양한 먹거리와 볼거리를 함께 경험할 수 있습니다.\n\n교통은 강릉 시내 중심가에 위치해 대중교통 이용이 편리하며, 강릉 버스터미널에서 택시로 약 10분 정도 소요됩니다. 자가용 이용 시에는 인근에 주차 공간이 있으나, 주말과 휴일에는 혼잡할 수 있으니 대중교통 이용을 권장합니다.\n\n방문 팁으로는 인기 메뉴가 빨리 소진될 수 있으니, 방문 전 예약이나 전화 문의를 통해 메뉴 확인을 하는 것이 좋으며, 늦은 저녁 시간보다는 이른 저녁 시간대 방문을 추천드립니다. 또한 포장마차 특성상 좌석이 한정적이므로, 단체 방문 시 미리 예약하는 것이 편리합니다.",
                                "contact": "",
                                "link": "https://www.instagram.com/umjinae_gangneung/",
                                "details": {
                                    "contact": "",
                                    "website": "https://www.instagram.com/umjinae_gangneung/",
                                    "category": "한식>해물,생선요리",
                                    "coordinates": {
                                        "x": "1289070154",
                                        "y": "377663424",
                                    },
                                    "address": {
                                        "street": "강원특별자치도 강릉시 경강로2255번길 21",
                                        "full": "강원특별자치도 강릉시 포남동 1155",
                                    },
                                },
                                "priority": 5,
                                "original_name": "강릉역",
                            },
                            {
                                "id": "http://ggcoffeestreet.modoo.at/",
                                "name": "강릉커피거리",
                                "type": "음식점",
                                "location": {
                                    "address": "강원특별자치도 강릉시 견소동 287-112",
                                    "road_address": "강원특별자치도 강릉시 창해로14번길 20-1",
                                    "coordinates": {
                                        "x": "1289480675",
                                        "y": "377720407",
                                    },
                                },
                                "category": "여행,명소>거리,골목",
                                "description": "강릉커피거리는 강원특별자치도 강릉시 견소동에 위치한 매력적인 명소로, 커피 애호가라면 반드시 방문해야 할 거리입니다. 이곳은 신선한 원두와 정성 가득한 핸드드립 커피를 즐길 수 있는 다양한 카페들이 모여 있어, 커피의 향과 맛을 깊이 느낄 수 있는 특별한 공간입니다. \n\n가장 방문하기 좋은 시기는 봄과 가을로, 쾌적한 날씨 속에서 거리 산책과 커피 한 잔의 여유를 만끽하기에 최적입니다. 특히 가을에는 주변 경관과 어우러진 커피거리의 분위기가 더욱 낭만적입니다.\n\n강릉커피거리 주변에는 경포대, 안목해변, 오죽헌 등 강릉의 대표적인 관광지도 가까워 다채로운 여행 코스를 계획할 수 있습니다. 경포대에서 바다 풍경을 감상하고, 오죽헌에서 역사와 문화를 체험한 후 커피거리에서 휴식을 취하는 코스가 인기입니다.\n\n교통은 강릉시내에서 버스나 택시를 이용하면 편리하며, 자가용 이용 시 주차장이 제한적이므로 대중교통 이용을 권장합니다. 강릉역에서도 택시로 10분 내외 거리에 위치해 접근성이 좋습니다.\n\n방문 팁으로는 인기 카페들은 주말과 휴일에 매우 붐빌 수 있으니 이른 아침이나 평일 방문을 추천하며, 다양한 카페를 둘러보며 자신만의 단골 카페를 찾아보는 재미도 쏠쏠합니다. 또한, 강릉커피거리는 지역 특산물을 활용한 디저트도 풍부하니 커피와 함께 맛보는 것도 잊지 마세요.",
                                "contact": "",
                                "link": "http://ggcoffeestreet.modoo.at/",
                                "details": {
                                    "contact": "",
                                    "website": "http://ggcoffeestreet.modoo.at/",
                                    "category": "여행,명소>거리,골목",
                                    "coordinates": {
                                        "x": "1289480675",
                                        "y": "377720407",
                                    },
                                    "address": {
                                        "street": "강원특별자치도 강릉시 창해로14번길 20-1",
                                        "full": "강원특별자치도 강릉시 견소동 287-112",
                                    },
                                },
                                "priority": 4,
                                "original_name": "안목 해변 카페거리",
                            },
                            {
                                "id": "",
                                "name": "강릉카페거리",
                                "type": "음식점",
                                "location": {
                                    "address": "강원특별자치도 강릉시 송정동 산1",
                                    "road_address": "",
                                    "coordinates": {
                                        "x": "1289469037",
                                        "y": "377730342",
                                    },
                                },
                                "category": "여행,명소>거리,골목",
                                "description": "강릉카페거리(강원특별자치도 강릉시 송정동 산1)는 커피와 바다를 사랑하는 이들에게 최적의 여행지입니다. 이곳은 동해 바다가 펼쳐진 송정해변 인근에 위치해 있어, 멋진 해변 풍경과 함께 다양한 개성 넘치는 카페들이 즐비한 거리입니다. 강릉카페거리의 주요 특징은 현지 바리스타들이 선보이는 신선한 원두와 독특한 인테리어를 자랑하는 카페들이 모여 있다는 점으로, 커피 애호가뿐만 아니라 사진 찍기 좋은 장소로도 인기가 높습니다.\n\n방문하기 좋은 시기는 봄부터 가을까지로, 특히 따뜻한 봄과 가을에는 바닷바람을 맞으며 여유롭게 커피를 즐기기 최적입니다. 여름에는 해변과 카페를 함께 즐길 수 있어 더욱 활기찬 분위기를 느낄 수 있습니다.\n\n주변 관광지로는 송정해변이 바로 인접해 있어 해수욕과 산책을 즐길 수 있으며, 경포대, 강릉 오죽헌, 정동진 등 강릉의 대표 명소들이 차로 20분 이내 거리에 위치해 있어 하루 코스로 다양하게 여행 계획을 세울 수 있습니다.\n\n교통 정보는 강릉 시내에서 버스나 택시로 약 10~15분 소요되며, 자가용 이용 시 강릉IC에서 15분 거리로 접근성이 좋습니다. 강릉역에서도 택시나 버스를 이용해 쉽게 방문할 수 있습니다.\n\n방문 팁으로는 이른 오전이나 평일 방문을 추천드립니다. 주말과 휴일에는 많은 관광객으로 인해 카페 내부가 붐빌 수 있으므로 여유로운 시간을 원한다면 한적한 시간대를 선택하는 것이 좋습니다. 또한, 카페마다 인기 메뉴가 다르니 미리 원하는 메뉴를 확인하고 방문하면 더욱 만족스러운 경험이 될 것입니다. 마지막으로, 날씨가 좋은 날에는 해변 산책도 함께 계획해보세요.",
                                "contact": "",
                                "link": "",
                                "details": {
                                    "contact": "",
                                    "website": "",
                                    "category": "여행,명소>거리,골목",
                                    "coordinates": {
                                        "x": "1289469037",
                                        "y": "377730342",
                                    },
                                    "address": {
                                        "street": "",
                                        "full": "강원특별자치도 강릉시 송정동 산1",
                                    },
                                },
                                "priority": 4,
                                "original_name": "안목 해변 카페거리",
                            },
                        ],
                        "search_intent": {
                            "locations": [
                                {
                                    "name": "서울역",
                                    "search_type": "장소",
                                    "keywords": ["기차역", "대중교통", "교통허브"],
                                    "priority": 5,
                                },
                                {
                                    "name": "강릉 중앙시장 내 식당",
                                    "search_type": "음식점",
                                    "keywords": ["강릉 맛집", "중앙시장", "지역 음식"],
                                    "priority": 4,
                                },
                                {
                                    "name": "경포 해변",
                                    "search_type": "관광지",
                                    "keywords": ["해변", "경포대", "바다", "산책"],
                                    "priority": 5,
                                },
                                {
                                    "name": "오죽헌",
                                    "search_type": "관광지",
                                    "keywords": [
                                        "역사",
                                        "전통가옥",
                                        "신사임당",
                                        "문화재",
                                    ],
                                    "priority": 4,
                                },
                                {
                                    "name": "초당순두부 마을",
                                    "search_type": "음식점",
                                    "keywords": ["순두부", "강릉 음식", "전통 음식"],
                                    "priority": 4,
                                },
                                {
                                    "name": "안목 해변",
                                    "search_type": "관광지",
                                    "keywords": ["해변", "카페거리", "바다 전망"],
                                    "priority": 4,
                                },
                                {
                                    "name": "선교장",
                                    "search_type": "관광지",
                                    "keywords": ["전통 가옥", "문화재", "역사"],
                                    "priority": 3,
                                },
                                {
                                    "name": "강릉 시내",
                                    "search_type": "장소",
                                    "keywords": ["도심", "쇼핑", "음식", "문화"],
                                    "priority": 3,
                                },
                                {
                                    "name": "강릉역",
                                    "search_type": "장소",
                                    "keywords": ["기차역", "대중교통", "교통"],
                                    "priority": 5,
                                },
                                {
                                    "name": "안목 해변 카페거리",
                                    "search_type": "음식점",
                                    "keywords": [
                                        "카페",
                                        "해변 카페",
                                        "커피",
                                        "경치 좋은 장소",
                                    ],
                                    "priority": 4,
                                },
                            ],
                            "common_preferences": {
                                "price_range": "중간",
                                "style": "전통 및 자연 중심",
                                "features": [
                                    "대중교통 접근 용이",
                                    "해변 및 해양 관광",
                                    "전통 음식 및 문화 체험",
                                ],
                            },
                        },
                        "user_preferences": {
                            "budget": "30만원",
                            "activities": [],
                            "transportation": "대중교통",
                        },
                    },
                },
                "is_complete_search": True,
            },
            "plan": {
                "itinerary": [
                    {
                        "day": 1,
                        "activities": [
                            {
                                "time": "07:00",
                                "activity": "서울 출발, 강릉행 KTX 탑승",
                                "location": "서울역",
                                "duration": "2시간",
                                "cost": 30000,
                            },
                            {
                                "time": "09:00",
                                "activity": "강릉 도착 후 아침 식사",
                                "location": "강릉 중앙시장 내 식당",
                                "duration": "1시간",
                                "cost": 12000,
                            },
                            {
                                "time": "10:00",
                                "activity": "경포 해변 산책 및 사진 촬영",
                                "location": "경포 해변",
                                "duration": "1시간 30분",
                                "cost": 0,
                            },
                            {
                                "time": "11:30",
                                "activity": "오죽헌 방문 및 관람",
                                "location": "오죽헌",
                                "duration": "1시간 30분",
                                "cost": 3000,
                            },
                            {
                                "time": "13:00",
                                "activity": "점심 식사 (강릉 특산물 초당순두부)",
                                "location": "초당순두부 마을",
                                "duration": "1시간",
                                "cost": 15000,
                            },
                            {
                                "time": "14:00",
                                "activity": "안목 해변 카페거리 방문 및 휴식",
                                "location": "안목 해변",
                                "duration": "1시간 30분",
                                "cost": 8000,
                            },
                            {
                                "time": "15:30",
                                "activity": "선교장 방문 및 전통 가옥 관람",
                                "location": "선교장",
                                "duration": "1시간",
                                "cost": 3000,
                            },
                            {
                                "time": "16:30",
                                "activity": "강릉 시내에서 강릉역으로 이동 (버스 또는 택시)",
                                "location": "강릉 시내",
                                "duration": "30분",
                                "cost": 2000,
                            },
                            {
                                "time": "17:00",
                                "activity": "서울행 KTX 탑승",
                                "location": "강릉역",
                                "duration": "2시간",
                                "cost": 30000,
                            },
                            {
                                "time": "19:00",
                                "activity": "서울 도착, 여행 종료",
                                "location": "서울역",
                                "duration": "0시간",
                                "cost": 0,
                            },
                        ],
                    }
                ],
                "budget": {
                    "transportation": {
                        "estimated": 62000.0,
                        "details": [
                            {"item": "서울-강릉 KTX 왕복", "cost": 60000},
                            {"item": "강릉 시내 버스 및 택시", "cost": 2000},
                        ],
                    },
                    "accommodation": {"estimated": 0.0, "details": []},
                    "food": {
                        "estimated": 27000.0,
                        "details": [
                            {"item": "아침 식사", "cost": 12000},
                            {"item": "점심 식사", "cost": 15000},
                        ],
                    },
                    "activities": {
                        "estimated": 6000.0,
                        "details": [
                            {"item": "오죽헌 입장료", "cost": 3000},
                            {"item": "선교장 입장료", "cost": 3000},
                        ],
                    },
                    "total": 105000.0,
                },
                "recommendations": [
                    {"category": "먹거리", "items": ["초당순두부", "강릉 커피"]},
                    {
                        "category": "관광지",
                        "items": [
                            "경포 해변",
                            "오죽헌",
                            "선교장",
                            "안목 해변 카페거리",
                        ],
                    },
                ],
                "tips": [
                    "KTX는 사전에 예매 시 할인 가능하니 미리 예약하세요.",
                    "강릉 시내에서는 버스와 택시를 이용하면 편리합니다.",
                    "날씨에 따라 경포 해변 산책 시 편한 복장을 준비하세요.",
                    "당일치기인 만큼 시간 관리를 철저히 하세요.",
                ],
            },
        },
    }


@pytest.mark.asyncio
async def test_mail_agent_process(mail_agent, test_input):
    # 메일 전송 실행
    result = await mail_agent.process(test_input)

    # 기본 검증
    assert result["status"] == "success"
    assert "message" in result
    assert "email" in result
    assert result["email"] == test_input["email"]


@pytest.mark.asyncio
async def test_mail_agent_validation(mail_agent):
    # 유효하지 않은 입력 테스트
    invalid_input = {
        "email": "test@example.com",
        # 필수 필드 누락
    }
    result = await mail_agent.process(invalid_input)
    assert result["status"] == "error"
    assert "error" in result
    assert "message" in result


@pytest.mark.asyncio
async def test_mail_agent_error_handling(mail_agent, test_input, monkeypatch):
    # SMTP 서버 연결 실패 시뮬레이션
    def mock_smtp(*args, **kwargs):
        raise Exception("SMTP Connection Error")

    monkeypatch.setattr("smtplib.SMTP", mock_smtp)

    result = await mail_agent.process(test_input)
    assert result["status"] == "error"
    assert "error" in result
    assert "message" in result
